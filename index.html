<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LuaProtector Pro | Advanced Lua Obfuscation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap');
    
    * {
      font-family: 'Poppins', sans-serif;
      scroll-behavior: smooth;
    }
    
    code, pre, .mono {
      font-family: 'JetBrains Mono', monospace;
    }
    
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background: #0a0a0a;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: relative;
      overflow: hidden;
    }
    
    .gradient-bg::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: pulse 20s linear infinite;
    }
    
    @keyframes pulse {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .glass-card {
      background: rgba(25, 25, 35, 0.7);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    
    .card-shadow {
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }
    
    .card-shadow:hover {
      box-shadow: 0 25px 80px rgba(102, 126, 234, 0.2);
    }
    
    .btn-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s ease;
      min-height: 48px;
      touch-action: manipulation;
      position: relative;
      overflow: hidden;
      border: none;
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    
    .btn-gradient::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: 0.5s;
    }
    
    .btn-gradient:hover::before {
      left: 100%;
    }
    
    .btn-gradient:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
    }
    
    .btn-gradient:active {
      transform: scale(0.98);
    }
    
    .input-focus {
      transition: all 0.3s ease;
      background: rgba(20, 20, 30, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #fff;
    }
    
    .input-focus:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
      background: rgba(25, 25, 35, 0.9);
    }
    
    textarea.input-focus {
      resize: vertical;
      min-height: 200px;
      font-family: 'JetBrains Mono', monospace;
      line-height: 1.5;
    }
    
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 0.35rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .badge-success {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      color: white;
    }
    
    .badge-premium {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
    }
    
    .badge-pro {
      background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
      color: white;
    }
    
    .animate-in {
      animation: slideIn 0.4s ease-out;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .tabs {
      display: flex;
      gap: 0;
      border-bottom: 2px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 1.5rem;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .tab-btn {
      padding: 0.75rem 1rem;
      border: none;
      background: none;
      color: rgba(255, 255, 255, 0.6);
      cursor: pointer;
      font-weight: 600;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
      white-space: nowrap;
      font-size: 0.9rem;
      flex-shrink: 0;
      position: relative;
    }
    
    .tab-btn.active {
      color: white;
      border-bottom-color: #667eea;
    }
    
    .tab-btn.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 3px;
      background: #667eea;
      border-radius: 3px;
    }
    
    .tab-content {
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .tab-content.active {
      display: block;
    }
    
    .encryption-level {
      height: 8px;
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.1);
      overflow: hidden;
      position: relative;
    }
    
    .encryption-fill {
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #3b82f6, #8b5cf6);
      border-radius: 4px;
      width: 0%;
      transition: width 1.5s ease;
    }
    
    .feature-card {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .feature-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      transform: translateX(-100%);
      transition: transform 0.5s ease;
    }
    
    .feature-card:hover::before {
      transform: translateX(0);
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      border-color: rgba(102, 126, 234, 0.3);
    }
    
    .glow-text {
      text-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    }
    
    .particles {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 0;
    }
    
    .particle {
      position: absolute;
      background: rgba(102, 126, 234, 0.3);
      border-radius: 50%;
      animation: float 20s infinite linear;
    }
    
    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-1000px) rotate(720deg);
        opacity: 0;
      }
    }
    
    .loading-dots::after {
      content: '';
      animation: dots 1.5s steps(4, end) infinite;
    }
    
    @keyframes dots {
      0%, 20% { content: ''; }
      40% { content: '.'; }
      60% { content: '..'; }
      80%, 100% { content: '...'; }
    }
    
    .typewriter {
      overflow: hidden;
      border-right: 2px solid #667eea;
      white-space: nowrap;
      animation: typing 3.5s steps(40, end), blink 0.75s step-end infinite;
    }
    
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    
    @keyframes blink {
      from, to { border-color: transparent }
      50% { border-color: #667eea }
    }
    
    @media (max-width: 640px) {
      .tabs {
        gap: 0;
        margin-bottom: 1rem;
      }
      
      .tab-btn {
        padding: 0.6rem 0.8rem;
        font-size: 0.85rem;
      }
      
      .gradient-bg {
        padding: 1.5rem 1rem !important;
      }
      
      .gradient-bg h1 {
        font-size: 1.75rem !important;
      }
      
      .gradient-bg p {
        font-size: 0.95rem;
      }
      
      .glass-card {
        padding: 1.5rem !important;
      }
    }

    @supports (padding: max(0px)) {
      body {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
      }
    }
    
    .security-badge {
      animation: pulse-glow 2s infinite;
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 5px rgba(102, 126, 234, 0.5); }
      50% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8); }
    }
  </style>
</head>
<body class="text-white">
  <!-- Particles Background -->
  <div class="particles" id="particles"></div>
  
  <!-- Main Container -->
  <div class="w-full px-4 py-6 sm:py-12 relative z-10">
    <div class="max-w-6xl mx-auto">
      
      <!-- Header -->
      <div class="gradient-bg rounded-2xl sm:rounded-3xl p-6 sm:p-10 mb-8 relative overflow-hidden">
        <div class="relative z-10">
          <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
            <div>
              <div class="flex items-center gap-3 mb-2">
                <div class="p-2 bg-white/10 rounded-lg">
                  <i class="fas fa-shield-alt text-2xl text-white"></i>
                </div>
                <h1 class="text-3xl sm:text-4xl font-bold glow-text">LuaProtector <span class="text-yellow-300">PRO</span></h1>
              </div>
              <p class="text-lg sm:text-xl text-white/80 mb-4">Advanced Lua Obfuscation & Protection</p>
              <div class="flex flex-wrap gap-2">
                <span class="badge badge-pro"><i class="fas fa-star mr-1"></i>10-Layer Encryption</span>
                <span class="badge badge-premium"><i class="fas fa-shield-check mr-1"></i>Tamper Protection</span>
                <span class="badge badge-success"><i class="fas fa-bolt mr-1"></i>Ultra Fast</span>
              </div>
            </div>
            <div class="text-right">
              <div class="security-badge inline-flex items-center gap-2 bg-black/30 px-4 py-2 rounded-full">
                <i class="fas fa-lock text-green-400"></i>
                <span class="text-sm font-bold">SECURE CONNECTION</span>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
            <div class="bg-white/10 backdrop-blur-sm p-4 rounded-xl">
              <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-layer-group text-blue-400 text-xl"></i>
                <h3 class="font-bold">10-Layer Encryption</h3>
              </div>
              <p class="text-sm text-white/80">Multiple obfuscation layers like Lura.ph</p>
              <div class="encryption-level mt-2">
                <div class="encryption-fill" id="encryptionLevel"></div>
              </div>
            </div>
            
            <div class="bg-white/10 backdrop-blur-sm p-4 rounded-xl">
              <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-user-shield text-green-400 text-xl"></i>
                <h3 class="font-bold">Tamper Protection</h3>
              </div>
              <p class="text-sm text-white/80">Anti-debug & anti-tamper mechanisms</p>
            </div>
            
            <div class="bg-white/10 backdrop-blur-sm p-4 rounded-xl">
              <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-rocket text-purple-400 text-xl"></i>
                <h3 class="font-bold">Fast Execution</h3>
              </div>
              <p class="text-sm text-white/80">Optimized code with minimal overhead</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Main Content -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Left Column - Obfuscation Options -->
        <div class="lg:col-span-1">
          <div class="glass-card rounded-2xl p-6 card-shadow">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-2">
              <i class="fas fa-sliders-h text-blue-400"></i>Obfuscation Settings
            </h2>
            
            <div class="space-y-6">
              <!-- Script Name -->
              <div>
                <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                  <i class="fas fa-tag text-purple-400"></i>Script Name
                </label>
                <input 
                  id="scriptName" 
                  type="text" 
                  placeholder="my_awesome_script" 
                  class="w-full px-4 py-3 rounded-lg input-focus"
                />
                <p class="text-xs text-gray-400 mt-2">Only letters, numbers, and hyphens allowed</p>
              </div>
              
              <!-- Encryption Level -->
              <div>
                <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                  <i class="fas fa-shield-alt text-green-400"></i>Encryption Level
                </label>
                <div class="flex items-center gap-3">
                  <input type="range" id="encryptionSlider" min="1" max="10" value="10" class="flex-1">
                  <span id="encryptionValue" class="font-bold text-lg text-blue-400">10</span>
                </div>
                <div class="flex justify-between text-xs text-gray-400 mt-2">
                  <span>Basic</span>
                  <span class="text-green-400 font-bold">Maximum (Lura.ph Level)</span>
                </div>
              </div>
              
              <!-- Tamper Protection -->
              <div>
                <label class="block text-sm font-semibold mb-3 flex items-center gap-2">
                  <i class="fas fa-user-shield text-red-400"></i>Tamper Protection
                </label>
                <div class="space-y-3">
                  <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="antiDebug" class="w-4 h-4 rounded" checked>
                    <span class="flex-1">Anti-Debug Protection</span>
                    <i class="fas fa-info-circle text-gray-400" title="Prevents debugging tools"></i>
                  </label>
                  <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="antiTamper" class="w-4 h-4 rounded" checked>
                    <span class="flex-1">Anti-Tamper Protection</span>
                    <i class="fas fa-info-circle text-gray-400" title="Detects and blocks code modification"></i>
                  </label>
                  <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="stringEncryption" class="w-4 h-4 rounded" checked>
                    <span class="flex-1">String Encryption</span>
                    <i class="fas fa-info-circle text-gray-400" title="Encrypts all strings in code"></i>
                  </label>
                  <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" id="controlFlow" class="w-4 h-4 rounded" checked>
                    <span class="flex-1">Control Flow Obfuscation</span>
                    <i class="fas fa-info-circle text-gray-400" title="Obfuscates program flow"></i>
                  </label>
                </div>
              </div>
              
              <!-- File Upload -->
              <div>
                <label class="block text-sm font-semibold mb-2 flex items-center gap-2">
                  <i class="fas fa-upload text-yellow-400"></i>Upload Lua File
                </label>
                <div class="border-2 border-dashed border-gray-600 rounded-lg p-6 text-center hover:border-blue-500 transition cursor-pointer"
                     onclick="document.getElementById('fileInput').click()"
                     id="dropZone">
                  <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-3"></i>
                  <p class="text-sm text-gray-400">Drag & drop or click to upload</p>
                  <p class="text-xs text-gray-500 mt-2">.lua or .txt files up to 100MB</p>
                  <input 
                    id="fileInput" 
                    type="file" 
                    accept=".lua,.txt" 
                    class="hidden"
                    onchange="handleFileUpload()"
                  />
                </div>
              </div>
            </div>
          </div>
          
          <!-- Features -->
          <div class="glass-card rounded-2xl p-6 card-shadow mt-6">
            <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
              <i class="fas fa-star text-yellow-400"></i>Premium Features
            </h3>
            <div class="space-y-3">
              <div class="feature-card bg-gray-800/50 border border-gray-700 p-4 rounded-lg">
                <div class="flex items-center gap-3">
                  <i class="fas fa-check-circle text-green-400"></i>
                  <span>10-Layer AES & XOR Encryption</span>
                </div>
              </div>
              <div class="feature-card bg-gray-800/50 border border-gray-700 p-4 rounded-lg">
                <div class="flex items-center gap-3">
                  <i class="fas fa-check-circle text-green-400"></i>
                  <span>Dual Tamper Protection</span>
                </div>
              </div>
              <div class="feature-card bg-gray-800/50 border border-gray-700 p-4 rounded-lg">
                <div class="flex items-center gap-3">
                  <i class="fas fa-check-circle text-green-400"></i>
                  <span>Virtual Machine Protection</span>
                </div>
              </div>
              <div class="feature-card bg-gray-800/50 border border-gray-700 p-4 rounded-lg">
                <div class="flex items-center gap-3">
                  <i class="fas fa-check-circle text-green-400"></i>
                  <span>Anti-Hook & Anti-Dump</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Right Column - Code Editor & Results -->
        <div class="lg:col-span-2">
          <div class="glass-card rounded-2xl p-6 card-shadow">
            <!-- Code Editor -->
            <div class="mb-6">
              <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold flex items-center gap-2">
                  <i class="fas fa-code text-blue-400"></i>Lua Code Editor
                </h2>
                <button onclick="formatCode()" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm flex items-center gap-2">
                  <i class="fas fa-align-left"></i>Format
                </button>
              </div>
              <textarea 
                id="luaText" 
                rows="12"
                placeholder="-- Paste your Lua code here\n-- Or upload a file\n\nprint('Hello from LuaProtector PRO!')" 
                class="w-full px-4 py-3 rounded-lg input-focus mono text-sm"
                spellcheck="false"
              ></textarea>
              <div class="flex justify-between items-center mt-2">
                <p class="text-xs text-gray-400">
                  <i class="fas fa-info-circle"></i> Max 100MB | Professional obfuscation
                </p>
                <p class="text-xs text-gray-400" id="charCount">0 characters</p>
              </div>
            </div>
            
            <!-- Obfuscate Button -->
            <button 
              id="obfuscateBtn" 
              class="w-full btn-gradient text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-3 text-lg mb-6"
              onclick="handleObfuscation()"
            >
              <i class="fas fa-shield-alt"></i>
              <span>OBFUSCATE & GENERATE RAW LINK</span>
              <i class="fas fa-arrow-right"></i>
            </button>
            
            <!-- Loading State -->
            <div id="loading" class="hidden text-center py-8">
              <div class="inline-block">
                <div class="relative">
                  <div class="w-20 h-20 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"></div>
                  <i class="fas fa-shield-alt text-2xl text-blue-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></i>
                </div>
                <p class="mt-4 text-gray-300 font-semibold">Applying 10-layer encryption<span class="loading-dots"></span></p>
                <p class="text-sm text-gray-500 mt-2">This may take a few seconds</p>
                
                <div class="mt-6 max-w-md mx-auto">
                  <div class="grid grid-cols-5 gap-2">
                    <div class="h-2 bg-blue-500 rounded animate-pulse"></div>
                    <div class="h-2 bg-blue-500 rounded animate-pulse" style="animation-delay: 0.1s"></div>
                    <div class="h-2 bg-blue-500 rounded animate-pulse" style="animation-delay: 0.2s"></div>
                    <div class="h-2 bg-blue-500 rounded animate-pulse" style="animation-delay: 0.3s"></div>
                    <div class="h-2 bg-blue-500 rounded animate-pulse" style="animation-delay: 0.4s"></div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Result Area -->
            <div id="result" class="hidden mt-6 pt-6 border-t border-gray-700 animate-in">
              <div class="bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-700 p-6 rounded-xl">
                <div class="flex items-start justify-between mb-6">
                  <div class="flex items-start gap-3">
                    <div class="p-2 bg-green-900/50 rounded-lg">
                      <i class="fas fa-check-circle text-green-400 text-xl"></i>
                    </div>
                    <div>
                      <p class="font-bold text-lg">Obfuscation Complete!</p>
                      <p class="text-gray-400">Your code is now protected with 10-layer encryption</p>
                    </div>
                  </div>
                  <div class="bg-black/50 px-3 py-1 rounded-full text-sm">
                    <i class="fas fa-clock mr-2"></i>
                    <span id="processingTime">0.5s</span>
                  </div>
                </div>
                
                <div class="space-y-4">
                  <!-- Raw Link -->
                  <div>
                    <p class="text-sm uppercase font-bold text-gray-400 mb-3 flex items-center gap-2">
                      <i class="fas fa-link"></i>Secure Raw Link
                    </p>
                    <div class="flex gap-2">
                      <div class="flex-1 relative">
                        <input 
                          id="rawLink" 
                          type="text" 
                          readonly 
                          class="w-full px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg text-white text-sm mono cursor-pointer pr-12"
                        />
                        <div class="absolute right-3 top-1/2 transform -translate-y-1/2 flex gap-2">
                          <button onclick="testLink()" class="text-blue-400 hover:text-blue-300" title="Test Link">
                            <i class="fas fa-external-link-alt"></i>
                          </button>
                        </div>
                      </div>
                      <button 
                        id="copyBtn" 
                        class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition flex items-center gap-2 text-sm flex-shrink-0"
                      >
                        <i class="fas fa-copy"></i>Copy
                      </button>
                    </div>
                  </div>
                  
                  <!-- LoadString Command -->
                  <div>
                    <p class="text-sm uppercase font-bold text-gray-400 mb-3 flex items-center gap-2">
                      <i class="fas fa-terminal"></i>LoadString Command
                    </p>
                    <div class="flex gap-2">
                      <input 
                        id="loadstringCmd" 
                        type="text" 
                        readonly 
                        class="flex-1 px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg text-white text-sm mono cursor-pointer"
                      />
                      <button 
                        id="copyLoadstringBtn" 
                        class="px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold transition flex items-center gap-2 text-sm flex-shrink-0"
                      >
                        <i class="fas fa-copy"></i>Copy
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Security Info -->
                <div class="mt-6 p-4 bg-green-900/20 border border-green-700/50 rounded-lg">
                  <div class="flex items-start gap-3">
                    <i class="fas fa-shield-check text-green-400 text-lg mt-1"></i>
                    <div>
                      <p class="font-semibold text-green-300 mb-1">✓ Maximum Security Applied</p>
                      <p class="text-sm text-green-400/80">
                        Your code is protected with: 
                        <span class="font-bold">10-layer encryption</span>, 
                        <span class="font-bold">Dual tamper protection</span>, 
                        <span class="font-bold">String obfuscation</span>, and 
                        <span class="font-bold">Anti-debug mechanisms</span>.
                        Equivalent to Lura.ph security level.
                      </p>
                    </div>
                  </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="mt-6 grid grid-cols-2 sm:grid-cols-4 gap-2">
                  <button onclick="openInNewTab()" class="px-3 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-sm flex items-center justify-center gap-2">
                    <i class="fas fa-external-link-alt"></i>Open
                  </button>
                  <button onclick="shareLink()" class="px-3 py-2 bg-blue-900/50 hover:bg-blue-800/50 rounded-lg text-sm flex items-center justify-center gap-2">
                    <i class="fas fa-share"></i>Share
                  </button>
                  <button onclick="downloadScript()" class="px-3 py-2 bg-green-900/50 hover:bg-green-800/50 rounded-lg text-sm flex items-center justify-center gap-2">
                    <i class="fas fa-download"></i>Download
                  </button>
                  <button onclick="clearAll()" class="px-3 py-2 bg-red-900/50 hover:bg-red-800/50 rounded-lg text-sm flex items-center justify-center gap-2">
                    <i class="fas fa-trash"></i>Clear
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Error State -->
            <div id="error" class="hidden mt-6 p-4 bg-red-900/30 border border-red-700 rounded-xl animate-in">
              <div class="flex items-start gap-3">
                <i class="fas fa-exclamation-triangle text-red-400 text-xl flex-shrink-0 mt-1"></i>
                <div>
                  <p class="font-bold text-red-300 mb-1" id="errorTitle">Error</p>
                  <p id="errorMsg" class="text-red-400/80 text-sm"></p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- History -->
          <div class="glass-card rounded-2xl p-6 card-shadow mt-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-xl font-bold flex items-center gap-2">
                <i class="fas fa-history text-blue-400"></i>Recent Obfuscations
              </h2>
              <button onclick="clearHistory()" class="text-sm text-gray-400 hover:text-white">
                Clear All
              </button>
            </div>
            <div id="historyList" class="space-y-3">
              <div class="text-center py-8 text-gray-500">
                <i class="fas fa-history text-3xl mb-3"></i>
                <p>No obfuscation history yet</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="mt-8 text-center text-gray-500 text-sm pb-6">
        <div class="flex flex-col sm:flex-row justify-center items-center gap-2 mb-2">
          <span>LuaProtector PRO v3.0</span>
          <span class="hidden sm:block">•</span>
          <span>Advanced Lua Obfuscation Engine</span>
          <span class="hidden sm:block">•</span>
          <span>Equivalent to Lura.ph Security</span>
        </div>
        <p class="text-xs">© 2024 LuaProtector. All rights reserved. Not affiliated with Roblox.</p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <script>
    // Initialize particles
    function initParticles() {
      const container = document.getElementById('particles');
      const particleCount = 30;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        const size = Math.random() * 4 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 20}s`;
        
        container.appendChild(particle);
      }
    }
    
    // Update character count
    function updateCharCount() {
      const textarea = document.getElementById('luaText');
      const count = textarea.value.length;
      document.getElementById('charCount').textContent = `${count.toLocaleString()} characters`;
      
      // Update encryption level visualization
      const slider = document.getElementById('encryptionSlider');
      const fill = document.getElementById('encryptionLevel');
      const level = parseInt(slider.value);
      fill.style.width = `${level * 10}%`;
    }
    
    // Handle file upload
    async function handleFileUpload() {
      const file = document.getElementById('fileInput').files[0];
      const nameInput = document.getElementById('scriptName');
      
      if (!file) return;
      
      // Set filename as script name
      const fileName = file.name.replace(/\.[^/.]+$/, "");
      nameInput.value = fileName;
      
      try {
        const text = await file.text();
        document.getElementById('luaText').value = text;
        updateCharCount();
        
        Toastify({
          text: `File "${file.name}" loaded successfully`,
          duration: 3000,
          gravity: "top",
          position: "right",
          style: {
            background: "linear-gradient(to right, #00b09b, #96c93d)"
          }
        }).showToast();
      } catch (error) {
        showError('File Upload Error', 'Failed to read file. Please try again.');
      }
    }
    
    // Show loading animation
    function showLoading(show) {
      document.getElementById('loading').classList.toggle('hidden', !show);
      document.getElementById('result').classList.add('hidden');
      document.getElementById('error').classList.add('hidden');
      
      if (show) {
        const encryptionLevel = document.getElementById('encryptionSlider').value;
        const encryptionFill = document.getElementById('encryptionLevel');
        encryptionFill.style.width = `${encryptionLevel * 10}%`;
        
        // Animate encryption level
        let progress = 0;
        const interval = setInterval(() => {
          progress += 10;
          encryptionFill.style.width = `${progress}%`;
          if (progress >= encryptionLevel * 10) {
            clearInterval(interval);
          }
        }, 150);
      }
    }
    
    // Show error message
    function showError(title, message) {
      document.getElementById('errorTitle').textContent = title;
      document.getElementById('errorMsg').textContent = message;
      document.getElementById('error').classList.remove('hidden');
      document.getElementById('loading').classList.add('hidden');
      document.getElementById('result').classList.add('hidden');
    }
    
    // Show result
    function showResult(rawLink, scriptName, processingTime) {
      // Simulate encrypted link (in production, this would come from your backend)
      const encryptedPath = `/api/raw/${scriptName}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      const fullLink = window.location.origin + encryptedPath;
      
      document.getElementById('rawLink').value = fullLink;
      document.getElementById('loadstringCmd').value = `loadstring(game:HttpGet("${fullLink}"))()`;
      document.getElementById('processingTime').textContent = processingTime;
      
      // Add to history
      addToHistory(scriptName, fullLink);
      
      document.getElementById('result').classList.remove('hidden');
      document.getElementById('loading').classList.add('hidden');
      document.getElementById('error').classList.add('hidden');
      
      // Scroll to result
      document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
    
    // Format code
    function formatCode() {
      const textarea = document.getElementById('luaText');
      const code = textarea.value;
      
      // Simple formatting (in production, use a proper Lua formatter)
      const formatted = code
        .replace(/\n{3,}/g, '\n\n')
        .replace(/^\s+/gm, '')
        .replace(/\s+$/gm, '');
      
      textarea.value = formatted;
      updateCharCount();
      
      Toastify({
        text: "Code formatted",
        duration: 2000,
        gravity: "top",
        position: "right",
        style: {
          background: "linear-gradient(to right, #667eea, #764ba2)"
        }
      }).showToast();
    }
    
    // Handle obfuscation
    async function handleObfuscation() {
      const text = document.getElementById('luaText').value.trim();
      const name = document.getElementById('scriptName').value.trim();
      const encryptionLevel = document.getElementById('encryptionSlider').value;
      
      // Validation
      if (!text) {
        showError('Empty Code', 'Please enter Lua code to obfuscate');
        return;
      }
      
      if (!name) {
        showError('Missing Name', 'Please enter a script name');
        return;
      }
      
      if (!/^[a-zA-Z0-9\-_]+$/.test(name)) {
        showError('Invalid Name', 'Name can only contain letters, numbers, hyphens, and underscores');
        return;
      }
      
      if (text.length > 100 * 1024 * 1024) {
        showError('Code Too Large', 'Maximum code size is 100MB');
        return;
      }
      
      // Get security options
      const securityOptions = {
        encryptionLevel: parseInt(encryptionLevel),
        antiDebug: document.getElementById('antiDebug').checked,
        antiTamper: document.getElementById('antiTamper').checked,
        stringEncryption: document.getElementById('stringEncryption').checked,
        controlFlow: document.getElementById('controlFlow').checked
      };
      
      showLoading(true);
      
      // Simulate processing time based on code size
      const startTime = Date.now();
      const processingTime = Math.max(500, Math.min(3000, text.length / 1000));
      
      try {
        // In production, this would be a real API call
        await new Promise(resolve => setTimeout(resolve, processingTime));
        
        const endTime = Date.now();
        const actualTime = ((endTime - startTime) / 1000).toFixed(2) + 's';
        
        showResult('', name, actualTime);
        
        Toastify({
          text: `✅ Obfuscation complete! ${encryptionLevel}-layer encryption applied`,
          duration: 5000,
          gravity: "top",
          position: "center",
          style: {
            background: "linear-gradient(to right, #00b09b, #96c93d)"
          }
        }).showToast();
      } catch (err) {
        showError('Obfuscation Failed', err.message || 'An error occurred during obfuscation');
      }
    }
    
    // History functions
    function addToHistory(name, link) {
      let history = JSON.parse(localStorage.getItem('luaprotector_history') || '[]');
      
      const newItem = {
        name,
        link,
        created: new Date().toLocaleString('vi-VN'),
        size: document.getElementById('luaText').value.length,
        level: document.getElementById('encryptionSlider').value
      };
      
      // Remove duplicates
      history = history.filter(item => item.name !== name);
      
      // Add to beginning
      history.unshift(newItem);
      
      // Keep only last 10 items
      if (history.length > 10) history.pop();
      
      localStorage.setItem('luaprotector_history', JSON.stringify(history));
      updateHistoryUI();
    }
    
    function updateHistoryUI() {
      const history = JSON.parse(localStorage.getItem('luaprotector_history') || '[]');
      const historyList = document.getElementById('historyList');
      
      if (history.length === 0) {
        historyList.innerHTML = `
          <div class="text-center py-8 text-gray-500">
            <i class="fas fa-history text-3xl mb-3"></i>
            <p>No obfuscation history yet</p>
          </div>
        `;
        return;
      }
      
      historyList.innerHTML = history.map(item => `
        <div class="bg-gray-800/50 border border-gray-700 p-4 rounded-lg hover:border-blue-500/50 transition">
          <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <p class="font-bold text-white truncate">${item.name}</p>
                <span class="badge badge-pro text-xs">${item.level} layers</span>
              </div>
              <div class="flex flex-wrap gap-3 text-xs text-gray-400">
                <span><i class="fas fa-clock mr-1"></i>${item.created}</span>
                <span><i class="fas fa-file-code mr-1"></i>${(item.size / 1024).toFixed(1)} KB</span>
              </div>
              <input type="text" value="${item.link}" class="hidden" id="link_${item.name}">
            </div>
            <div class="flex gap-2 flex-shrink-0">
              <button onclick="copyToClipboard('${item.link}')" 
                      class="px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-xs flex items-center gap-2">
                <i class="fas fa-copy"></i>Link
              </button>
              <button onclick="copyLoadstring('${item.link}')" 
                      class="px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-xs flex items-center gap-2">
                <i class="fas fa-code"></i>LS
              </button>
              <button onclick="deleteHistoryItem('${item.name}')" 
                      class="px-3 py-2 bg-red-600/20 hover:bg-red-600/40 rounded-lg text-xs flex items-center gap-2 text-red-400">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }
    
    function clearHistory() {
      if (confirm('Clear all history?')) {
        localStorage.removeItem('luaprotector_history');
        updateHistoryUI();
        Toastify({
          text: "History cleared",
          duration: 3000,
          style: {
            background: "linear-gradient(to right, #667eea, #764ba2)"
          }
        }).showToast();
      }
    }
    
    function deleteHistoryItem(name) {
      let history = JSON.parse(localStorage.getItem('luaprotector_history') || '[]');
      history = history.filter(item => item.name !== name);
      localStorage.setItem('luaprotector_history', JSON.stringify(history));
      updateHistoryUI();
    }
    
    // Utility functions
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        Toastify({
          text: "Link copied to clipboard!",
          duration: 2000,
          gravity: "top",
          position: "right",
          style: {
            background: "linear-gradient(to right, #00b09b, #96c93d)"
          }
        }).showToast();
      });
    }
    
    function copyLoadstring(link) {
      const cmd = `loadstring(game:HttpGet("${link}"))()`;
      navigator.clipboard.writeText(cmd).then(() => {
        Toastify({
          text: "LoadString copied to clipboard!",
          duration: 2000,
          gravity: "top",
          position: "right",
          style: {
            background: "linear-gradient(to right, #8b5cf6, #7c3aed)"
          }
        }).showToast();
      });
    }
    
    function testLink() {
      const link = document.getElementById('rawLink').value;
      window.open(link, '_blank');
    }
    
    function openInNewTab() {
      const link = document.getElementById('rawLink').value;
      window.open(link, '_blank');
    }
    
    function shareLink() {
      const link = document.getElementById('rawLink').value;
      if (navigator.share) {
        navigator.share({
          title: 'LuaProtector Obfuscated Script',
          text: 'Check out this obfuscated Lua script',
          url: link
        });
      } else {
        copyToClipboard(link);
      }
    }
    
    function downloadScript() {
      const link = document.getElementById('rawLink').value;
      const name = document.getElementById('scriptName').value;
      const a = document.createElement('a');
      a.href = link;
      a.download = `${name}_obfuscated.lua`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
    
    function clearAll() {
      if (confirm('Clear all inputs and results?')) {
        document.getElementById('luaText').value = '';
        document.getElementById('scriptName').value = '';
        document.getElementById('result').classList.add('hidden');
        document.getElementById('error').classList.add('hidden');
        updateCharCount();
      }
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      initParticles();
      updateCharCount();
      updateHistoryUI();
      
      // Update encryption level display
      const slider = document.getElementById('encryptionSlider');
      const valueDisplay = document.getElementById('encryptionValue');
      
      slider.addEventListener('input', () => {
        valueDisplay.textContent = slider.value;
        const fill = document.getElementById('encryptionLevel');
        fill.style.width = `${slider.value * 10}%`;
      });
      
      // Character count update
      document.getElementById('luaText').addEventListener('input', updateCharCount);
      
      // Copy buttons
      document.getElementById('copyBtn').addEventListener('click', () => {
        const link = document.getElementById('rawLink').value;
        copyToClipboard(link);
      });
      
      document.getElementById('copyLoadstringBtn').addEventListener('click', () => {
        const cmd = document.getElementById('loadstringCmd').value;
        navigator.clipboard.writeText(cmd).then(() => {
          Toastify({
            text: "LoadString copied to clipboard!",
            duration: 2000,
            gravity: "top",
            position: "right",
            style: {
              background: "linear-gradient(to right, #8b5cf6, #7c3aed)"
            }
          }).showToast();
        });
      });
      
      // Drag and drop for file upload
      const dropZone = document.getElementById('dropZone');
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropZone.addEventListener(eventName, preventDefaults, false);
      });
      
      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }
      
      ['dragenter', 'dragover'].forEach(eventName => {
        dropZone.addEventListener(eventName, highlight, false);
      });
      
      ['dragleave', 'drop'].forEach(eventName => {
        dropZone.addEventListener(eventName, unhighlight, false);
      });
      
      function highlight() {
        dropZone.classList.add('border-blue-500');
      }
      
      function unhighlight() {
        dropZone.classList.remove('border-blue-500');
      }
      
      dropZone.addEventListener('drop', handleDrop, false);
      
      function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        document.getElementById('fileInput').files = files;
        handleFileUpload();
      }
    });
  </script>
</body>
</html>